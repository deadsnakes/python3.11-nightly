Fix hang when trying to iterate over a ``typing.Union``.
